{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 17,
  "summary": "Build a patient-facing data entry app to record hospital visit and expense details, plus an analytics page showing monthly/yearly totals and graphs for hospital and medicine spending.",
  "architectural_notes": [],
  "known_issues": [
    "Import/Export button not visible to user on the deployed app (user reports: \"Did not see button\").",
    "User reports an error when saving a new entry (possible regression; saving previously worked)."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-create-a-patient-facing-data-entry-form-to-record-a-hospital-visit-with-the-following-fields-hospital-name-text-visit-date-date-doctor-name-text-patient-name-text-hospital-charges-in-rs-number-medicine-charges-in-rs-number-medicine-name-text-address-multiline-text-include-basic-validation-required-fields-numeric-fields-must-be-0-and-clear-inline-error-messages-in-english",
      "title": "Create a patient-facing data entry form to record a hospital visit with the following fields: Hospital name (text), Visit date (date), Doctor name (text), Patient name (text), Hospital charges in Rs (number), Medicine charges in Rs (number), Medicine name (text), Address (multiline text). Include basic validation (required fields, numeric fields must be >= 0) and clear inline error messages in English.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-my-entries-screen-that-lists-the-current-user-s-saved-hospital-visit-entries-showing-key-details-date-hospital-name-doctor-name-patient-name-hospital-rs-medicine-rs-medicine-name-address-provide-sorting-by-most-recent-first-by-visit-date-then-createdat",
      "title": "Add a 'My Entries' screen that lists the current user’s saved hospital visit entries, showing key details (date, hospital name, doctor name, patient name, hospital Rs, medicine Rs, medicine name, address). Provide sorting by most recent first (by visit date, then createdAt).",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-edit-and-delete-actions-for-an-existing-entry-with-a-confirmation-dialog-for-delete-editing-must-preload-the-existing-values-into-the-form-and-update-the-stored-record",
      "title": "Provide edit and delete actions for an existing entry, with a confirmation dialog for delete. Editing must preload the existing values into the form and update the stored record.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-patient-friendly-visual-theme-across-the-app-colors-typography-spacing-and-components-that-feels-calm-and-clinical-e-g-neutral-soft-greens-or-warm-neutrals-and-use-it-consistently-for-the-form-list-buttons-and-dialogs-all-user-facing-text-must-be-in-english",
      "title": "Apply a coherent, patient-friendly visual theme across the app (colors, typography, spacing, and components) that feels calm and clinical (e.g., neutral/soft greens or warm neutrals), and use it consistently for the form, list, buttons, and dialogs. All user-facing text must be in English.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-visit-date-field-in-the-visit-entry-form-to-support-manual-typing-editing-not-only-selection-via-the-calendar-popover-while-keeping-validation-and-saved-timestamp-behavior-correct",
      "title": "Update the Visit Date field in the visit entry form to support manual typing/editing (not only selection via the calendar popover), while keeping validation and saved timestamp behavior correct.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-increase-the-available-input-space-for-medicine-related-data-in-the-visit-entry-form-by-expanding-the-medicine-name-field-to-accommodate-longer-text-and-ensure-longer-multiline-medicine-text-displays-cleanly-in-the-entries-list",
      "title": "Increase the available input space for medicine-related data in the visit entry form by expanding the Medicine Name field to accommodate longer text, and ensure longer/multiline medicine text displays cleanly in the entries list.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-export-to-xlsx-action-that-lets-an-authenticated-user-download-all-of-their-hospital-visit-entries-as-a-single-xlsx-file-from-the-my-entries-screen",
      "title": "Add an export-to-XLSX action that lets an authenticated user download all of their hospital visit entries as a single .xlsx file from the \"My Entries\" screen.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-export-to-pdf-action-that-lets-an-authenticated-user-download-a-pdf-report-of-all-of-their-hospital-visit-entries-from-the-my-entries-screen",
      "title": "Add an export-to-PDF action that lets an authenticated user download a PDF report of all of their hospital visit entries from the \"My Entries\" screen.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-import-from-xlsx-action-that-allows-an-authenticated-user-to-upload-an-xlsx-file-and-import-hospital-visit-entries-into-their-account",
      "title": "Add an import-from-XLSX action that allows an authenticated user to upload an .xlsx file and import hospital visit entries into their account.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-authenticated-analytics-page-that-shows-monthly-and-yearly-totals-of-spending-for-both-hospital-charges-rs-and-medicine-charges-rs-based-on-the-current-user-s-saved-visit-entries",
      "title": "Add a new authenticated Analytics page that shows monthly and yearly totals of spending for both Hospital Charges (Rs) and Medicine Charges (Rs), based on the current user’s saved visit entries.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-analytics-page-generate-and-display-spending-graphs-charts-for-hospital-charges-rs-and-medicine-charges-rs-over-time-using-the-existing-entries-visitdate-values-for-grouping",
      "title": "On the Analytics page, generate and display spending graphs/charts for Hospital Charges (Rs) and Medicine Charges (Rs) over time using the existing entries’ visitDate values for grouping.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-main-tab-navigation-to-include-the-new-analytics-tab-without-breaking-the-existing-new-entry-and-my-entries-flows-including-edit-entry-behavior-that-returns-to-new-entry",
      "title": "Update the main tab navigation to include the new Analytics tab without breaking the existing New Entry and My Entries flows (including edit-entry behavior that returns to New Entry).",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-analytics-page-spending-bar-charts-to-use-more-clearly-differentiated-colors-for-hospital-charges-and-medicine-charges-in-both-light-and-dark-themes",
      "title": "Update the Analytics page spending bar charts to use more clearly differentiated colors for Hospital Charges and Medicine Charges (in both light and dark themes).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-display-the-rupee-amount-directly-on-the-spending-bar-charts-as-data-labels-value-annotations-for-both-hospital-charges-and-medicine-charges",
      "title": "Display the rupee amount directly on the spending bar charts as data labels (value annotations) for both Hospital Charges and Medicine Charges.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-new-visit-entry-save-flow-so-that-valid-entries-can-always-be-saved-successfully-and-show-a-clear-english-error-message-in-the-ui-when-saving-fails-instead-of-failing-silently-in-the-console",
      "title": "Fix the New Visit Entry save flow so that valid entries can always be saved successfully, and show a clear English error message in the UI when saving fails (instead of failing silently in the console).",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-visit-entry-create-edit-mutations-propagate-actionable-error-details-to-the-ui-so-that-backend-traps-for-example-authorization-or-type-errors-can-be-surfaced-as-a-user-friendly-english-message",
      "title": "Ensure the visit entry create/edit mutations propagate actionable error details to the UI so that backend traps (for example, authorization or type errors) can be surfaced as a user-friendly English message.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-analytics-spending-graphs-so-they-visibly-use-distinct-clearly-colored-series-for-hospital-charges-and-medicine-charges-not-monochrome-in-both-light-and-dark-themes-and-ensure-the-legend-and-tooltips-match-the-same-series-colors",
      "title": "Update the Analytics spending graphs so they visibly use distinct, clearly colored series for Hospital Charges and Medicine Charges (not monochrome), in both light and dark themes, and ensure the legend and tooltips match the same series colors.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a data entry form for patient hospital visit details: hospital name, date, doctor name, patient name, hospital charges (Rs), medicine charges (Rs), medicine name, and address.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Implement backend persistence for visit entries in the single Motoko main actor, including functions to create an entry and list entries for the current user. Each entry must store: id, createdAt timestamp, hospitalName, visitDate, doctorName, patientName, hospitalRs, medicineRs, medicineName, address, and owner (caller principal).",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Allow manual editing/typing of the visit date field (not only via date picker).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Increase input space for medicine-related data (e.g., larger/wider medicine name/medicine details field) to accommodate more text.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Add Import/Export buttons to allow users to export (and/or import) visit/expense entries in XLSX and PDF formats.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add an analytics page that shows monthly and yearly totals for Hospital Rs and Medicine Rs, and generates graphs/charts of these totals over time.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Update analytics graphs to use different colors and display the amounts on the graph (e.g., data labels/value annotations).",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Patient hospital visit data entry and expense tracker",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}